{"ast":null,"code":"import _slicedToArray from\"/Users/andrianmorillo/Documents/Hacker Hero Files/FE Track/Capstone/anime_list/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import{Form,Nav,Spinner}from\"react-bootstrap\";import JikanApi from\"../../../api/jikan.api\";import SearchItemComponent from\"./search_item.component\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var SearchComponent=function SearchComponent(props){var setAnimeId=props.setAnimeId;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),search=_useState2[0],setSearch=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),searchResults=_useState4[0],setSearchResults=_useState4[1];// for searching\nuseEffect(function(){if(!search)return setSearchResults([]);var delayDebounceFn=setTimeout(function(){setSearchResults(/*#__PURE__*/_jsx(Spinner,{animation:\"border\",className:\"m-3\"}));JikanApi.get(\"/anime?q=\".concat(search,\"&order_by=type&sort=desc\")).then(function(res){setSearchResults(res.data.data.length!==0?res.data.data.map(function(anime){return{mal_id:anime.mal_id,title:anime.title,image:anime.images.webp.small_image_url,rank:anime.rank,score:anime.score,type:anime.type,status:anime.status};}):\"No Anime Found\");});},500);return function(){return clearTimeout(delayDebounceFn);};},[search]);return/*#__PURE__*/_jsx(Nav,{className:\"position-relative col-lg-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex-grow-1\",children:[/*#__PURE__*/_jsx(Form.Control,{id:\"search\",className:\"px-3\",autoComplete:\"off\",type:\"search\",onChange:function onChange(e){setSearch(e.target.value);},onClick:function onClick(e){setSearch(e.target.value);},placeholder:\"Search here\"}),/*#__PURE__*/_jsx(\"div\",{className:\"position-absolute shadow rounded w-100 d-flex flex-column align-items-center\",id:\"search_results\",style:{maxHeight:\"30rem\",overflowY:\"auto\"},children:searchResults.length===undefined?searchResults:typeof searchResults===\"string\"?/*#__PURE__*/_jsx(\"p\",{className:\"m-0 p-3\",children:searchResults}):searchResults.map(function(result){return/*#__PURE__*/_jsx(SearchItemComponent,{result:result,setSearch:setSearch,setAnimeId:setAnimeId},result.mal_id);})})]})});};export default SearchComponent;","map":{"version":3,"names":["React","useEffect","useState","Form","Nav","Spinner","JikanApi","SearchItemComponent","SearchComponent","props","setAnimeId","search","setSearch","searchResults","setSearchResults","delayDebounceFn","setTimeout","get","then","res","data","length","map","anime","mal_id","title","image","images","webp","small_image_url","rank","score","type","status","clearTimeout","e","target","value","maxHeight","overflowY","undefined","result"],"sources":["/Users/andrianmorillo/Documents/Hacker Hero Files/FE Track/Capstone/anime_list/src/components/nav.component/search.component/search.component.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { Form, Nav, Spinner } from \"react-bootstrap\";\nimport JikanApi from \"../../../api/jikan.api\";\nimport SearchItemComponent from \"./search_item.component\";\n\nconst SearchComponent = (props) => {\n\tlet { setAnimeId } = props;\n\tconst [search, setSearch] = useState(\"\");\n\tconst [searchResults, setSearchResults] = useState([]);\n\n\t// for searching\n\tuseEffect(() => {\n\t\tif (!search) return setSearchResults([]);\n\n\t\tconst delayDebounceFn = setTimeout(() => {\n\t\t\tsetSearchResults(<Spinner animation=\"border\" className=\"m-3\" />);\n\n\t\t\tJikanApi.get(`/anime?q=${search}&order_by=type&sort=desc`).then(\n\t\t\t\t(res) => {\n\t\t\t\t\tsetSearchResults(\n\t\t\t\t\t\tres.data.data.length !== 0\n\t\t\t\t\t\t\t? res.data.data.map((anime) => {\n\t\t\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t\t\tmal_id: anime.mal_id,\n\t\t\t\t\t\t\t\t\t\ttitle: anime.title,\n\t\t\t\t\t\t\t\t\t\timage: anime.images.webp\n\t\t\t\t\t\t\t\t\t\t\t.small_image_url,\n\t\t\t\t\t\t\t\t\t\trank: anime.rank,\n\t\t\t\t\t\t\t\t\t\tscore: anime.score,\n\t\t\t\t\t\t\t\t\t\ttype: anime.type,\n\t\t\t\t\t\t\t\t\t\tstatus: anime.status,\n\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t  })\n\t\t\t\t\t\t\t: \"No Anime Found\"\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t);\n\t\t}, 500);\n\n\t\treturn () => clearTimeout(delayDebounceFn);\n\t}, [search]);\n\n\treturn (\n\t\t<Nav className=\"position-relative col-lg-6\">\n\t\t\t<div className=\"flex-grow-1\">\n\t\t\t\t<Form.Control\n\t\t\t\t\tid=\"search\"\n\t\t\t\t\tclassName=\"px-3\"\n\t\t\t\t\tautoComplete=\"off\"\n\t\t\t\t\ttype=\"search\"\n\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\tsetSearch(e.target.value);\n\t\t\t\t\t}}\n\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\tsetSearch(e.target.value);\n\t\t\t\t\t}}\n\t\t\t\t\tplaceholder=\"Search here\"\n\t\t\t\t></Form.Control>\n\t\t\t\t<div\n\t\t\t\t\tclassName=\"position-absolute shadow rounded w-100 d-flex flex-column align-items-center\"\n\t\t\t\t\tid=\"search_results\"\n\t\t\t\t\tstyle={{ maxHeight: \"30rem\", overflowY: \"auto\" }}\n\t\t\t\t>\n\t\t\t\t\t{/* {console.log(searchResults.length)} */}\n\t\t\t\t\t{searchResults.length === undefined ? (\n\t\t\t\t\t\tsearchResults\n\t\t\t\t\t) : typeof searchResults === \"string\" ? (\n\t\t\t\t\t\t<p className=\"m-0 p-3\">{searchResults}</p>\n\t\t\t\t\t) : (\n\t\t\t\t\t\tsearchResults.map((result) => {\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<SearchItemComponent\n\t\t\t\t\t\t\t\t\tresult={result}\n\t\t\t\t\t\t\t\t\tsetSearch={setSearch}\n\t\t\t\t\t\t\t\t\tkey={result.mal_id}\n\t\t\t\t\t\t\t\t\tsetAnimeId={setAnimeId}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</Nav>\n\t);\n};\n\nexport default SearchComponent;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}